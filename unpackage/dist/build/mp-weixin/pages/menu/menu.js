(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/menu/menu"],{"35c0":function(e,t){throw new Error("Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\nModuleBuildError: Module build failed (from ./node_modules/sass-loader/dist/cjs.js):\nError: Cannot find module '/Applications/HBuilderX.app/Contents/HBuilderX/plugins/compile-node-sass/node_modules/node-sass-china'\n    at Function.Module._resolveFilename (module.js:547:15)\n    at Function.Module._resolveFilename (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/module-alias/index.js:49:29)\n    at Function.Module._load (module.js:474:25)\n    at Module.require (module.js:596:17)\n    at require (internal/module.js:11:18)\n    at getDefaultSassImplementation (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/getDefaultSassImplementation.js:24:10)\n    at getSassImplementation (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/getSassImplementation.js:19:72)\n    at Object.loader (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/index.js:40:61)\n    at runLoaders (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/webpack/lib/NormalModule.js:301:20)\n    at /Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/loader-runner/lib/LoaderRunner.js:367:11\n    at /Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/loader-runner/lib/LoaderRunner.js:233:18\n    at runSyncOrAsync (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/loader-runner/lib/LoaderRunner.js:143:3)\n    at iterateNormalLoaders (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/loader-runner/lib/LoaderRunner.js:232:2)\n    at iterateNormalLoaders (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/loader-runner/lib/LoaderRunner.js:221:10)\n    at /Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/loader-runner/lib/LoaderRunner.js:236:3\n    at Object.context.callback (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at Object.module.exports (/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js:60:8)")},"4b96":function(e,t,n){"use strict";var o=n("35c0"),r=n.n(o);r.a},"69b9":function(e,t,n){"use strict";n.r(t);var o=n("ff09"),r=n("9570");for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("4b96");var a,u=n("f0c5"),s=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,"1746f8b8",null,!1,o["a"],a);t["default"]=s.exports},"7a06":function(e,t,n){"use strict";(function(e){n("7324");o(n("66fd"));var t=o(n("69b9"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},9570:function(e,t,n){"use strict";n.r(t);var o=n("cd6f"),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},cd6f:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("4795")),r=n("2f62");function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,o,r,i,a){try{var u=e[i](a),s=u.value}catch(d){return void n(d)}u.done?t(s):Promise.resolve(s).then(o,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){d(i,o,r,a,u,"next",e)}function u(e){d(i,o,r,a,u,"throw",e)}a(void 0)}))}}var c=function(){n.e("components/modal/modal").then(function(){return resolve(n("3f56"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/popup-layer/popup-layer").then(function(){return resolve(n("3126"))}.bind(null,n)).catch(n.oe)},f={components:{modal:c,popupLayer:p},data:function(){return{goods:[],ads:[{image:"https://img-shop.qmimg.cn/s23107/2020/04/27/4ebdb582a5185358c4.jpg?imageView2/2/w/600/h/600"},{image:"https://images.qmai.cn/s23107/2020/05/08/c25de6ef72d2890630.png?imageView2/2/w/600/h/600"},{image:"https://img-shop.qmimg.cn/s23107/2020/04/10/add546c1b1561f880d.jpg?imageView2/2/w/600/h/600"},{image:"https://images.qmai.cn/s23107/2020/04/30/b3af19e0de8ed42f61.jpg?imageView2/2/w/600/h/600"},{image:"https://img-shop.qmimg.cn/s23107/2020/04/17/8aeb78516d63864420.jpg?imageView2/2/w/600/h/600"}],loading:!0,currentCateId:6905,cateScrollTop:0,menuScrollIntoView:"",cart:[],goodDetailModalVisible:!1,good:{},category:{},cartPopupVisible:!1,sizeCalcState:!1}},onLoad:function(){var e=this;return l(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t)})))()},computed:u({},(0,r.mapState)(["orderType","address","store"]),{},(0,r.mapGetters)(["isLogin"]),{goodCartNum:function(){var e=this;return function(t){return e.cart.reduce((function(e,n){return n.id===t?e+n.number:e}),0)}},menuCartNum:function(){var e=this;return function(t){return e.cart.reduce((function(e,n){return n.cate_id===t?e+n.number:e}),0)}},getCartGoodsNumber:function(){return this.cart.reduce((function(e,t){return e+t.number}),0)},getCartGoodsPrice:function(){return this.cart.reduce((function(e,t){return e+t.number*t.price}),0)},disabledPay:function(){return"takeout"==this.orderType&&this.getCartGoodsPrice<this.store.min_price},spread:function(){if("takeout"==this.orderType)return parseFloat((this.store.min_price-this.getCartGoodsPrice).toFixed(2))}}),methods:u({},(0,r.mapMutations)(["SET_ORDER_TYPE"]),{},(0,r.mapActions)(["getStore"]),{init:function(){var t=this;return l(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.getStore();case 3:return n.next=5,t.$api("goods");case 5:t.goods=n.sent,t.loading=!1,t.cart=e.getStorageSync("cart")||[];case 8:case"end":return n.stop()}}),n)})))()},takout:function(){"takeout"!=this.orderType&&(this.isLogin?e.navigateTo({url:"/pages/address/address?is_choose=true"}):e.navigateTo({url:"/pages/login/login"}))},handleMenuTap:function(e){var t=this;this.sizeCalcState||this.calcSize(),this.currentCateId=e,this.$nextTick((function(){return t.cateScrollTop=t.goods.find((function(t){return t.id==e})).top}))},handleGoodsScroll:function(e){var t=e.detail;this.sizeCalcState||this.calcSize();var n=t.scrollTop,o=this.goods.filter((function(e){return e.top<=n})).reverse();o.length>0&&(this.currentCateId=o[0].id)},calcSize:function(){var t=10,n=e.createSelectorQuery().select("#ads");n.fields({size:!0},(function(e){t+=Math.floor(e.height)})).exec(),this.goods.forEach((function(n){var o=e.createSelectorQuery().select("#cate-".concat(n.id));o.fields({size:!0},(function(e){n.top=t,t+=e.height,n.bottom=t})).exec()})),this.sizeCalcState=!0},handleAddToCart:function(e,t,n){var o=this.cart.findIndex((function(e){return t.use_property?e.id===t.id&&e.props===t.props:e.id===t.id}));o>-1?this.cart[o].number+=n:this.cart.push({id:t.id,cate_id:e.id,name:t.name,price:t.price,number:n,image:t.images,use_property:t.use_property,props_text:t.use_property?this.getGoodSelectedProps(t):"",props:t.use_property?this.getGoodSelectedProps(t,"ids"):[]})},handleReduceFromCart:function(e,t){var n=this.cart.findIndex((function(e){return e.id===t.id}));this.cart[n].number-=1,this.cart[n].number<=0&&this.cart.splice(n,1)},showGoodDetailModal:function(e,t){this.good=JSON.parse(JSON.stringify(u({},t,{number:1}))),this.category=JSON.parse(JSON.stringify(e)),this.goodDetailModalVisible=!0},closeGoodDetailModal:function(){this.goodDetailModalVisible=!1,this.category={},this.good={}},changePropertyDefault:function(e,t){var n=this;this.good.property[e].values.forEach((function(e){return n.$set(e,"is_default",0)})),this.good.property[e].values[t].is_default=1,this.good.number=1},getGoodSelectedProps:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(e.use_property){var n=[];return e.property.forEach((function(e){var o=e.values;o.forEach((function(e){e.is_default&&n.push("text"===t?e.value:e.id)}))})),"text"===t?n.join("，"):n}return""},handlePropertyAdd:function(){this.good.number+=1},handlePropertyReduce:function(){1!==this.good.number&&(this.good.number-=1)},handleAddToCartInModal:function(){this.handleAddToCart(this.category,this.good,this.good.number),this.closeGoodDetailModal()},openCartPopup:function(){this.cartPopupVisible=!this.cartPopupVisible},handleCartClear:function(){var t=this;e.showModal({title:"提示",content:"确定清空购物车么",success:function(e){var n=e.confirm;n&&(t.cartPopupVisible=!1,t.cart=[])}})},handleCartItemAdd:function(e){this.cart[e].number+=1},handleCartItemReduce:function(e){1===this.cart[e].number?this.cart.splice(e,1):this.cart[e].number-=1,this.cart.length||(this.cartPopupVisible=!1)},toPay:function(){this.isLogin?(e.showLoading({title:"加载中"}),e.setStorageSync("cart",JSON.parse(JSON.stringify(this.cart))),e.navigateTo({url:"/pages/pay/pay"}),e.hideLoading()):e.navigateTo({url:"/pages/login/login"})}})};t.default=f}).call(this,n("543d")["default"])},ff09:function(e,t,n){"use strict";var o={modal:function(){return n.e("components/modal/modal").then(n.bind(null,"3f56"))},popupLayer:function(){return n.e("components/popup-layer/popup-layer").then(n.bind(null,"3126"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.goods,(function(t,n){var o=e.menuCartNum(t.id),r=e.menuCartNum(t.id);return{$orig:e.__get_orig(t),m0:o,m1:r}}))),o=e.__map(e.goods,(function(t,n){var o=e.__map(t.goods_list,(function(t,n){var o=e.goodCartNum(t.id),r=e.goodCartNum(t.id),i=e.goodCartNum(t.id),a=e.goodCartNum(t.id),u=e.goodCartNum(t.id);return{$orig:e.__get_orig(t),m2:o,m3:r,m4:i,m5:a,m6:u}}));return{$orig:e.__get_orig(t),l1:o}})),r=e.getGoodSelectedProps(e.good),i=e.getGoodSelectedProps(e.good),a=parseFloat(e.store.packing_fee);e.$mp.data=Object.assign({},{$root:{l0:n,l2:o,m7:r,m8:i,m9:a}})},i=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))}},[["7a06","common/runtime","common/vendor"]]]);